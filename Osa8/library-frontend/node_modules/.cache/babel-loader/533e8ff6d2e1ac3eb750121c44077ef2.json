{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Nicholas/Programming/Fullstack/fullstack/osa8/library-frontend/src/components/Books.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useQuery } from '@apollo/client';\nimport { ALL_BOOKS } from './../queries';\n\nconst Books = props => {\n  const allBooks = useQuery(ALL_BOOKS);\n  const [books, setBooks] = useState([]);\n  useEffect(() => {\n    if (allBooks.data) {\n      console.log(allBooks.data.allAuthors, 'allBooks.data.allAuthors in App.js');\n      setBooks(allBooks.data.allBooks);\n    }\n  }, [allBooks]);\n  console.log('books in allGenres', books);\n  const booksGenres = books.map(book => book.genres).reduce((pre, cur) => pre.concat(cur));\n  console.log('booksGenres in allGenres', booksGenres);\n  const genres = [...new Set(booksGenres)];\n  console.log('genres in allGenres', genres); //if (allBooks.loading)  {\n  //  return <div>loading...</div>\n  //}\n\n  if (!props.show) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33\n    },\n    __self: this\n  }, \"books\"), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38\n    },\n    __self: this\n  }), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39\n    },\n    __self: this\n  }, \"author\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \"published\")), books.map(a => React.createElement(\"tr\", {\n    key: a.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, a.title), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, a.author.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, a.published))))), genres.map(a => React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, a)));\n};\n\nexport default Books;","map":{"version":3,"sources":["/mnt/c/Nicholas/Programming/Fullstack/fullstack/osa8/library-frontend/src/components/Books.js"],"names":["React","useState","useEffect","useQuery","ALL_BOOKS","Books","props","allBooks","books","setBooks","data","console","log","allAuthors","booksGenres","map","book","genres","reduce","pre","cur","concat","Set","show","a","title","author","name","published"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,QAAyB,gBAAzB;AACA,SAASC,SAAT,QAA0B,cAA1B;;AAEA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AACvB,QAAMC,QAAQ,GAAGJ,QAAQ,CAACC,SAAD,CAAzB;AACA,QAAM,CAACI,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,CAAC,EAAD,CAAlC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIK,QAAQ,CAACG,IAAb,EAAmB;AACjBC,MAAAA,OAAO,CAACC,GAAR,CAAYL,QAAQ,CAACG,IAAT,CAAcG,UAA1B,EAAsC,oCAAtC;AACAJ,MAAAA,QAAQ,CAACF,QAAQ,CAACG,IAAT,CAAcH,QAAf,CAAR;AACD;AACF,GALQ,EAKN,CAACA,QAAD,CALM,CAAT;AAOAI,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCJ,KAAlC;AACA,QAAMM,WAAW,GAAGN,KAAK,CAACO,GAAN,CAAWC,IAAD,IAAUA,IAAI,CAACC,MAAzB,EACnBC,MADmB,CACZ,CAACC,GAAD,EAAMC,GAAN,KAAcD,GAAG,CAACE,MAAJ,CAAWD,GAAX,CADF,CAApB;AAEAT,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ,EAAwCE,WAAxC;AACA,QAAMG,MAAM,GAAG,CAAC,GAAG,IAAIK,GAAJ,CAAQR,WAAR,CAAJ,CAAf;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCK,MAAnC,EAhBuB,CAkBvB;AACA;AACA;;AAEA,MAAI,CAACX,KAAK,CAACiB,IAAX,EAAiB;AACf,WAAO,IAAP;AACD;;AAED,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,CADF,EAUGf,KAAK,CAACO,GAAN,CAAUS,CAAC,IACV;AAAI,IAAA,GAAG,EAAEA,CAAC,CAACC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,CAAC,CAACC,KAAP,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,CAAC,CAACE,MAAF,CAASC,IAAd,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKH,CAAC,CAACI,SAAP,CAHF,CADD,CAVH,CADF,CAHF,EAuBGX,MAAM,CAACF,GAAP,CAAWS,CAAC,IACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAMA,CAAN,CADD,CAvBH,CADF;AA6BD,CAvDD;;AAyDA,eAAenB,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useQuery } from '@apollo/client'\nimport { ALL_BOOKS } from './../queries'\n\nconst Books = (props) => {\n  const allBooks = useQuery(ALL_BOOKS)\n  const [books, setBooks] = useState([])\n\n  useEffect(() => {\n    if (allBooks.data) {\n      console.log(allBooks.data.allAuthors, 'allBooks.data.allAuthors in App.js')\n      setBooks(allBooks.data.allBooks)\n    }\n  }, [allBooks])\n\n  console.log('books in allGenres', books)\n  const booksGenres = books.map((book) => book.genres)\n  .reduce((pre, cur) => pre.concat(cur))\n  console.log('booksGenres in allGenres', booksGenres)\n  const genres = [...new Set(booksGenres)]\n  console.log('genres in allGenres', genres)\n\n  //if (allBooks.loading)  {\n  //  return <div>loading...</div>\n  //}\n\n  if (!props.show) {\n    return null\n  }\n\n  return (\n    <div>\n      <h2>books</h2>\n\n      <table>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              author\n            </th>\n            <th>\n              published\n            </th>\n          </tr>\n          {books.map(a =>\n            <tr key={a.title}>\n              <td>{a.title}</td>\n              <td>{a.author.name}</td>\n              <td>{a.published}</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      {genres.map(a =>\n        <div>{a}</div>\n      )}\n    </div>\n  )\n}\n\nexport default Books"]},"metadata":{},"sourceType":"module"}