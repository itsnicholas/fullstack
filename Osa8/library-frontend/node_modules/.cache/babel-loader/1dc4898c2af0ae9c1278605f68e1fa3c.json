{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Nicholas/Programming/Fullstack/fullstack/Osa8/library-frontend/src/App.js\";\nimport React, { useState, useEffect } from 'react';\nimport Authors from './components/Authors';\nimport Books from './components/Books';\nimport NewBook from './components/NewBook';\nimport LoginForm from './components/LoginForm';\nimport Recommend from './components/Recommend';\nimport { useQuery, useApolloClient } from '@apollo/client';\nimport { ALL_AUTHORS } from './queries';\n\nconst Notify = ({\n  errorMessage\n}) => {\n  if (!errorMessage) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    style: {\n      color: 'red'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16\n    },\n    __self: this\n  }, errorMessage);\n};\n\nconst App = () => {\n  const [page, setPage] = useState('authors');\n  const allAuthors = useQuery(ALL_AUTHORS);\n  const [authors, setAuthors] = useState([]);\n  const [token, setToken] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(null);\n  const client = useApolloClient();\n  console.log(allAuthors.data, 'allAuthors.data in App.js');\n  useEffect(() => {\n    const token = localStorage.getItem('phonenumbers-user-token');\n\n    if (token) {\n      setToken(token);\n    }\n  }, []);\n  useEffect(() => {\n    if (allAuthors.data) {\n      console.log(allAuthors.data.allAuthors, 'allAuthors.data.allAuthors in App.js');\n      setAuthors(allAuthors.data.allAuthors);\n    }\n  }, [allAuthors]); //if (allAuthors.loading)  {\n  //  return <div>loading...</div>\n  //}\n\n  const logout = () => {\n    setToken(null);\n    localStorage.clear();\n    client.resetStore();\n    setPage('login');\n  };\n\n  const notify = message => {\n    setErrorMessage(message);\n    setTimeout(() => {\n      setErrorMessage(null);\n    }, 5000);\n  };\n\n  if (!token) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => setPage('authors'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, \"authors\"), React.createElement(\"button\", {\n      onClick: () => setPage('books'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"books\"), React.createElement(\"button\", {\n      onClick: () => setPage('login'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"login\")), React.createElement(Notify, {\n      errorMessage: errorMessage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }), React.createElement(LoginForm, {\n      setToken: setToken,\n      setPage: setPage,\n      setError: notify,\n      show: page === 'login',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }), React.createElement(Authors, {\n      token: token,\n      authors: authors,\n      show: page === 'authors',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(Books, {\n      show: page === 'books',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    onClick: () => setPage('authors'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"authors\"), React.createElement(\"button\", {\n    onClick: () => setPage('books'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, \"books\"), React.createElement(\"button\", {\n    onClick: () => setPage('add'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"add book\"), React.createElement(\"button\", {\n    onClick: () => setPage('recommend'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"recommend\"), React.createElement(\"button\", {\n    onClick: logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, \"logout\")), React.createElement(Notify, {\n    errorMessage: errorMessage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(Authors, {\n    token: token,\n    authors: authors,\n    show: page === 'authors',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(Books, {\n    show: page === 'books',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(NewBook, {\n    token: token,\n    show: page === 'add',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112\n    },\n    __self: this\n  }), React.createElement(Recommend, {\n    token: token,\n    show: page === 'recommend',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117\n    },\n    __self: this\n  }));\n};\n\nexport default App;","map":{"version":3,"sources":["/mnt/c/Nicholas/Programming/Fullstack/fullstack/Osa8/library-frontend/src/App.js"],"names":["React","useState","useEffect","Authors","Books","NewBook","LoginForm","Recommend","useQuery","useApolloClient","ALL_AUTHORS","Notify","errorMessage","color","App","page","setPage","allAuthors","authors","setAuthors","token","setToken","setErrorMessage","client","console","log","data","localStorage","getItem","logout","clear","resetStore","notify","message","setTimeout"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport Authors from './components/Authors'\nimport Books from './components/Books'\nimport NewBook from './components/NewBook'\nimport LoginForm from './components/LoginForm'\nimport Recommend from './components/Recommend'\nimport { useQuery, useApolloClient } from '@apollo/client'\nimport { ALL_AUTHORS } from './queries'\n\nconst Notify = ({ errorMessage }) => {\n  if ( !errorMessage ) {\n    return null\n  }\n\n  return (\n    <div style={{color: 'red'}}>\n      {errorMessage}\n    </div>\n  )\n}\n\nconst App = () => {\n  const [page, setPage] = useState('authors')\n  const allAuthors = useQuery(ALL_AUTHORS)\n  const [authors, setAuthors] = useState([])\n  const [token, setToken] = useState(null)\n  const [errorMessage, setErrorMessage] = useState(null)\n  const client = useApolloClient()\n\n  console.log(allAuthors.data, 'allAuthors.data in App.js')\n\n  useEffect(() => {\n    const token = localStorage.getItem('phonenumbers-user-token')\n    if ( token ) {\n      setToken(token)\n    }\n  }, [])\n\n  useEffect(() => {\n    if (allAuthors.data) {\n      console.log(allAuthors.data.allAuthors, 'allAuthors.data.allAuthors in App.js')\n      setAuthors(allAuthors.data.allAuthors)\n    }\n  }, [allAuthors])\n\n  //if (allAuthors.loading)  {\n  //  return <div>loading...</div>\n  //}\n\n  const logout = () => {\n    setToken(null)\n    localStorage.clear()\n    client.resetStore()\n    setPage('login')\n  }\n\n  const notify = (message) => {\n    setErrorMessage(message)\n    setTimeout(() => {\n      setErrorMessage(null)\n    }, 5000)\n  }\n\n  if (!token) {\n    return (\n      <div>\n        <div>\n        <button onClick={() => setPage('authors')}>authors</button>\n        <button onClick={() => setPage('books')}>books</button>\n        <button onClick={() => setPage('login')}>login</button>\n        </div>\n\n        <Notify errorMessage={errorMessage} />\n\n        <LoginForm\n          setToken={setToken}\n          setPage={setPage}\n          setError={notify}\n          show={page === 'login'}\n        />\n\n        <Authors token={token} \n          authors={authors}\n          show={page === 'authors'}\n        />\n\n        <Books show={page === 'books'} />\n        \n      </div>\n    )\n  }\n\n  return (\n    <div>\n      <div>\n        <button onClick={() => setPage('authors')}>authors</button>\n        <button onClick={() => setPage('books')}>books</button>\n        <button onClick={() => setPage('add')}>add book</button>\n        <button onClick={() => setPage('recommend')}>recommend</button>\n        <button onClick={logout}>logout</button>\n      </div>\n\n      <Notify errorMessage={errorMessage} />\n\n      <Authors token={token} \n        authors={authors}\n        show={page === 'authors'}\n      />\n\n      <Books show={page === 'books'} />\n\n      <NewBook\n        token={token}\n        show={page === 'add'}\n      />\n\n      <Recommend\n        token={token}\n        show={page === 'recommend'}\n      />\n\n    </div>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}