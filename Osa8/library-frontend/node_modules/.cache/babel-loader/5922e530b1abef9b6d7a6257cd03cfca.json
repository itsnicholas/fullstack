{"ast":null,"code":"var _jsxFileName = \"/mnt/c/Nicholas/Programming/Fullstack/fullstack/Osa8/library-frontend/src/components/Books.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useQuery, useLazyQuery } from '@apollo/client';\nimport { ALL_BOOKS, ALL_GENRES } from './../queries';\n\nconst Books = props => {\n  //const allBooks = useQuery(ALL_BOOKS)\n  const allGenres = useQuery(ALL_GENRES);\n  const [getBooks, result] = useLazyQuery(ALL_BOOKS);\n  const [books, setBooks] = useState(null);\n  const [genres, setGenres] = useState(null); //useEffect(() => {\n  //  if (allBooks.data) {\n  //    setBooks(allBooks.data.allBooks)\n  //  }\n  //}, [allBooks])\n\n  useEffect(() => {\n    if (result.data) {\n      setBooks(result.data.allBooks);\n    }\n  }, [result.data]);\n  useEffect(() => {\n    if (allGenres.data) {\n      setGenres(allGenres.data.allGenres);\n    }\n  }, [allGenres]);\n\n  const clickGenre = genre => {\n    getBooks({\n      variables: {\n        genre: genre\n      }\n    });\n    console.log(result, 'getBooks in clickGenre');\n    setBooks(result);\n  };\n\n  if (result.loading) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, \"loading...\");\n  }\n\n  if (!props.show) {\n    return null;\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, \"books\"), React.createElement(\"table\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"tbody\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"tr\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, \"author\"), React.createElement(\"th\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, \"published\")), books.map(a => React.createElement(\"tr\", {\n    key: a.title,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, a.title), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, a.author.name), React.createElement(\"td\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, a.published))))), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, genres.map(a => React.createElement(\"button\", {\n    onClick: () => clickGenre(a),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, a))));\n};\n\nexport default Books;","map":{"version":3,"sources":["/mnt/c/Nicholas/Programming/Fullstack/fullstack/Osa8/library-frontend/src/components/Books.js"],"names":["React","useState","useEffect","useQuery","useLazyQuery","ALL_BOOKS","ALL_GENRES","Books","props","allGenres","getBooks","result","books","setBooks","genres","setGenres","data","allBooks","clickGenre","genre","variables","console","log","loading","show","map","a","title","author","name","published"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,QAAT,EAAmBC,YAAnB,QAAuC,gBAAvC;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,cAAtC;;AAEA,MAAMC,KAAK,GAAIC,KAAD,IAAW;AACvB;AACA,QAAMC,SAAS,GAAGN,QAAQ,CAACG,UAAD,CAA1B;AACA,QAAM,CAACI,QAAD,EAAWC,MAAX,IAAqBP,YAAY,CAACC,SAAD,CAAvC;AACA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBZ,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACa,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAC,IAAD,CAApC,CALuB,CAOvB;AACA;AACA;AACA;AACA;;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIS,MAAM,CAACK,IAAX,EAAiB;AACfH,MAAAA,QAAQ,CAACF,MAAM,CAACK,IAAP,CAAYC,QAAb,CAAR;AACD;AACF,GAJQ,EAIN,CAACN,MAAM,CAACK,IAAR,CAJM,CAAT;AAMAd,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIO,SAAS,CAACO,IAAd,EAAoB;AAClBD,MAAAA,SAAS,CAACN,SAAS,CAACO,IAAV,CAAeP,SAAhB,CAAT;AACD;AACF,GAJQ,EAIN,CAACA,SAAD,CAJM,CAAT;;AAMA,QAAMS,UAAU,GAAIC,KAAD,IAAW;AAC5BT,IAAAA,QAAQ,CAAC;AAAEU,MAAAA,SAAS,EAAE;AAAED,QAAAA,KAAK,EAAEA;AAAT;AAAb,KAAD,CAAR;AACAE,IAAAA,OAAO,CAACC,GAAR,CAAYX,MAAZ,EAAoB,wBAApB;AACAE,IAAAA,QAAQ,CAACF,MAAD,CAAR;AACD,GAJD;;AAMA,MAAIA,MAAM,CAACY,OAAX,EAAqB;AACnB,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAP;AACD;;AAED,MAAI,CAACf,KAAK,CAACgB,IAAX,EAAiB;AACf,WAAO,IAAP;AACD;;AAED,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBALF,CADF,EAUGZ,KAAK,CAACa,GAAN,CAAUC,CAAC,IACV;AAAI,IAAA,GAAG,EAAEA,CAAC,CAACC,KAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,CAAC,CAACC,KAAP,CADF,EAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKD,CAAC,CAACE,MAAF,CAASC,IAAd,CAFF,EAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKH,CAAC,CAACI,SAAP,CAHF,CADD,CAVH,CADF,CAHF,EAuBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGhB,MAAM,CAACW,GAAP,CAAWC,CAAC,IACX;AAAQ,IAAA,OAAO,EAAE,MAAMR,UAAU,CAACQ,CAAD,CAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAuCA,CAAvC,CADD,CADH,CAvBF,CADF;AA+BD,CAtED;;AAwEA,eAAenB,KAAf","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useQuery, useLazyQuery } from '@apollo/client'\nimport { ALL_BOOKS, ALL_GENRES } from './../queries'\n\nconst Books = (props) => {\n  //const allBooks = useQuery(ALL_BOOKS)\n  const allGenres = useQuery(ALL_GENRES)\n  const [getBooks, result] = useLazyQuery(ALL_BOOKS)\n  const [books, setBooks] = useState(null)\n  const [genres, setGenres] = useState(null)\n\n  //useEffect(() => {\n  //  if (allBooks.data) {\n  //    setBooks(allBooks.data.allBooks)\n  //  }\n  //}, [allBooks])\n\n  useEffect(() => {\n    if (result.data) {\n      setBooks(result.data.allBooks)\n    }\n  }, [result.data])\n\n  useEffect(() => {\n    if (allGenres.data) {\n      setGenres(allGenres.data.allGenres)\n    }\n  }, [allGenres])\n\n  const clickGenre = (genre) => {\n    getBooks({ variables: { genre: genre } })\n    console.log(result, 'getBooks in clickGenre')\n    setBooks(result)\n  }\n\n  if (result.loading)  {\n    return <div>loading...</div>\n  }\n\n  if (!props.show) {\n    return null\n  }\n\n  return (\n    <div>\n      <h2>books</h2>\n\n      <table>\n        <tbody>\n          <tr>\n            <th></th>\n            <th>\n              author\n            </th>\n            <th>\n              published\n            </th>\n          </tr>\n          {books.map(a =>\n            <tr key={a.title}>\n              <td>{a.title}</td>\n              <td>{a.author.name}</td>\n              <td>{a.published}</td>\n            </tr>\n          )}\n        </tbody>\n      </table>\n      <div>\n        {genres.map(a =>\n          <button onClick={() => clickGenre(a)}>{a}</button>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Books"]},"metadata":{},"sourceType":"module"}